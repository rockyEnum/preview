import{d as R,r as i,c as q,a as v,b as l,h as a,k as r,j as _,F as k,f as y,S as o,u as G,o as u,p as x,n as B,t as A,g as K,l as H,i as P,T as Q,_ as W}from"./index-D0MhBClt.js";import{L as X}from"./LineChart-CMvYhR_R.js";const Z={class:"data-analysis-page"},ee={class:"tab-menu"},ae={class:"page-header"},se={class:"content-area"},le={class:"filter-panel"},te={class:"tree-list"},ne=["onClick"],oe={class:"section-label"},ie={key:0,class:"tree-children"},re=["onMouseenter"],ce={class:"filter-actions"},de={class:"action-item"},ue={class:"action-item"},ve={class:"chart-panel"},_e={class:"toolbar"},me={class:"toolbar-left"},pe={class:"picker-group"},he={class:"toolbar-right"},fe={class:"chart-card"},be=R({__name:"DataAnalysis",setup(ge){const D=[{key:"comparison",label:"数据对比"},{key:"sensor",label:"传感器配置"}],w=i(D[0].key),C=i([{id:"zone-green",label:"绿化种植区",sensors:[{id:"sensor-soil-30",label:"土壤水分(30cm)"},{id:"sensor-soil-20",label:"土壤水分(20cm)"},{id:"sensor-soil-10",label:"土壤水分(10cm)",disabled:!0},{id:"sensor-air",label:"空气温度"}]},{id:"zone-eco",label:"生态种植区",sensors:[]},{id:"zone-farm",label:"农业种植区",sensors:[]},{id:"zone-plant",label:"植物生产区",sensors:[]},{id:"zone-smart",label:"智能种植区",sensors:[]}]),m=i(["zone-green"]),p=i(["sensor-soil-30","sensor-soil-20","sensor-air"]),h=i("sensor-soil-20"),b=i(""),T=t=>{m.value=m.value.includes(t)?m.value.filter(e=>e!==t):[...m.value,t]},U=t=>{const e=p.value.includes(t);p.value=e?p.value.filter(n=>n!==t):[...p.value,t],h.value=t},N=q(()=>{const t=b.value.trim();return t?C.value.map(e=>{if(!e.sensors.length)return e.label.includes(t)?e:null;const n=e.sensors.filter(f=>f.label.includes(t));return e.label.includes(t)?{...e,sensors:n.length?n:e.sensors}:n.length?{...e,sensors:n}:null}).filter(e=>!!e):C.value}),V=[{label:"原始数据",value:"raw"},{label:"生长指数",value:"growth"},{label:"农事记录",value:"tasks"}],F=i("raw"),L=i(),z=i(),M=Array.from({length:30},(t,e)=>`Jan ${e+1}`),S=()=>[{name:"Label A",color:"#2EC7C9",offset:20},{name:"Label B",color:"#4071EF",offset:25},{name:"Label C",color:"#A07EF5",offset:35},{name:"Label D",color:"#FF8F6B",offset:15},{name:"Label E",color:"#FFC53D",offset:10},{name:"Label F",color:"#40DF9F",offset:30}].map((e,n)=>({name:e.name,color:e.color,data:M.map((f,c)=>Math.round(e.offset+Math.sin((c+n)/3)*6+c*.5+n*2))})),E=i(S()),$=()=>{E.value=S()};return(t,e)=>{const n=_("a-tab-pane"),f=_("a-tabs"),c=_("a-button"),I=_("a-input"),j=_("a-checkbox"),Y=_("a-date-picker"),J=_("a-select");return u(),v("div",Z,[l("div",ee,[a(f,{activeKey:w.value,"onUpdate:activeKey":e[0]||(e[0]=s=>w.value=s),size:"small",animated:!1,class:"tabs"},{default:r(()=>[(u(),v(k,null,y(D,s=>a(n,{key:s.key,tab:s.label},null,8,["tab"])),64))]),_:1},8,["activeKey"])]),l("div",ae,[e[6]||(e[6]=l("div",{class:"title-block"},[l("span",null,"数据分析"),l("span",null,"Data analysis")],-1)),a(c,{class:"action-chip",shape:"round"},{default:r(()=>[a(o,{name:"association",width:"16",height:"16"}),e[5]||(e[5]=x(" 便捷组合 ",-1))]),_:1})]),l("div",se,[l("div",le,[a(I,{value:b.value,"onUpdate:value":e[1]||(e[1]=s=>b.value=s),class:"yomi-search-input",placeholder:"按关键字进行搜索","allow-clear":!0},{suffix:r(()=>[a(o,{name:"search"})]),_:1},8,["value"]),l("div",te,[(u(!0),v(k,null,y(N.value,s=>(u(),v("div",{key:s.id,class:"tree-section"},[l("div",{class:"tree-section-header",onClick:g=>T(s.id)},[a(o,{name:"arrow",width:"12",height:"12",class:B(["section-arrow",{expanded:m.value.includes(s.id)}])},null,8,["class"]),a(o,{name:"folder",width:"16",height:"16"}),l("span",oe,A(s.label),1)],8,ne),a(Q,{name:"fade"},{default:r(()=>{var g;return[m.value.includes(s.id)&&((g=s.sensors)!=null&&g.length)?(u(),v("div",ie,[(u(!0),v(k,null,y(s.sensors,d=>(u(),v("div",{key:d.id,class:B(["tree-sensor",{active:h.value===d.id,muted:d.disabled}]),onMouseenter:O=>h.value=d.id},[a(j,{checked:p.value.includes(d.id),disabled:d.disabled,onChange:P(O=>U(d.id),["stop"])},{default:r(()=>[x(A(d.label),1)]),_:2},1032,["checked","disabled","onChange"]),h.value===d.id?(u(),H(c,{key:0,class:"sensor-more",type:"text",size:"small"},{default:r(()=>[a(o,{name:"more",width:"12",height:"12"})]),_:1})):K("",!0)],42,re))),128))])):K("",!0)]}),_:2},1024)]))),128))]),l("div",ce,[l("div",de,[a(o,{name:"association",width:"16",height:"16"})]),l("div",ue,[a(o,{name:"clear",width:"16",height:"16"})])])]),l("div",ve,[l("div",_e,[l("div",me,[l("div",pe,[a(Y,{value:L.value,"onUpdate:value":e[2]||(e[2]=s=>L.value=s),valueFormat:"YYYY-MM-DD",placeholder:"开始日期",class:"date-picker"},null,8,["value"]),e[7]||(e[7]=l("span",{class:"to-label"},"To",-1)),a(Y,{value:z.value,"onUpdate:value":e[3]||(e[3]=s=>z.value=s),valueFormat:"YYYY-MM-DD",placeholder:"结束日期",class:"date-picker"},null,8,["value"])]),a(J,{value:F.value,"onUpdate:value":e[4]||(e[4]=s=>F.value=s),options:V,size:"large",class:"metric-select"},null,8,["value"])]),l("div",he,[a(c,{onClick:$},{default:r(()=>[a(o,{name:"refresh"})]),_:1}),a(c,null,{default:r(()=>[a(o,{name:"excel"}),e[8]||(e[8]=x(" 导出Excel ",-1))]),_:1}),a(c,null,{default:r(()=>[a(o,{name:"caidan1",color:"#4071EF"})]),_:1}),a(c,null,{default:r(()=>[a(o,{name:"table"})]),_:1})])]),l("div",fe,[a(X,{xData:G(M),yData:[],seriesList:E.value,height:"360px"},null,8,["xData","seriesList"])])])])])}}}),xe=W(be,[["__scopeId","data-v-1d20c9aa"]]);export{xe as default};
